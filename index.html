<!DOCTYPE html>
<html>
	<title>Apoint test 2</title>
	<head>
		<script src="jquery-3.7.1.min.js"></script>
		<script src="calendar.js"></script>
		<script src="jaxa.js"></script>
		<script src="render.js"></script>
		<script src="apiRequest.js"></script>
		
		<script>
			function userProfile() {
				let jwt_hash = "";
				let login_status = false;
					
				this.setJWT = (hash) => {jwt_hash = hash;}
				this.getJWT = () => jwt_hash;

				this.setLoginStatus = (bool) => {login_status = bool;}
				this.getLoginStatus = () => login_status;
			}

			let profile = new userProfile();
							


			function renderCalendars(calendars)
			{
				$("#board_list").html("");
				$.each(calendars, function(i, item) {
					var child = $("<div class='calendar_box' data-id='" + item.id + "''>" + item.title  + "</div>");
					$("#board_list").append(child);
				});
			}
			
			$(function(){
				const check_gdpr = window.localStorage.getItem("gdpr");
				if(check_gdpr)
				{
					$("#gdpr_banner").hide();
				}

				$(document).on('click', '.calendar_box', function() {
					const id = $(this).data("id"); 
					window.location.hash = "calendar/" + id;
				});

				$(window).on('popstate', function(event) {
 					const hash = event.target.location.hash;
					const path = hash.split("/");
					if(path.length == 2){
						renderPage(path[0],path[1]);
					}else{
						renderPage("goto",path[0]);
					}
				});

				$("#gdpr_ok").on("click", function() {
					$("#gdpr_banner").hide();
					window.localStorage.setItem("gdpr", 1);
				});
			
				$(".submit_btn").on("click", function() {
					const action = $(this).data("action");
					renderPage("api", action)
				});

				const hash = window.location.hash;
				renderPage("goto", hash);
			})

		</script>

		<style>													
			html, body
			{
				margin:0px;
				padding:0px;
				background:#d8d8d8;
			}
			
			p
			{
				font-family:arial;
				color:#f3f3e0;

			}
			
			#main
			{
				margin:auto;
				width:1080px;
			}
			
			#menu_bar
			{
				display:block;
				float:left;
				width:980px;
				background:#373737;
			}
			
			#menu_bar .menu_link
			{
				display:block;
				float:left;
				padding:10px;
				margin:10px;
				font-family:arial;
				color:#f3f3e0;
				text-decoration:none;
				font-size:17px;
			}
			
			#login_btn
			{
				display:block;
				float:left;
				width:100px;
				background:#696963;
				text-align:center;
				padding:20px 0px;
				font-family:arial;
				color:#f3f3e0;
				font-weight:bold;
				font-size:17px;
			}
			#login_btn:hover
			{
			cursor:pointer;
			}
			
			.calendar_box
			{
				display:block;
				float:left;
				width:200px;
				border:1px solid #000;
				border-radius:5px;
				text-align:center;
				padding:10px;
				margin:10px;
				background:#FFFFFF;
			}
			.calendar_box:hover
			{
				cursor:pointer;
			}
			
			
			#home
			{
				background:#e44746;
				text-align:center;
				
			}
			
			#home p
			{
				font-size:30px;
			}
			
			.btn_c2
			{
				display:block;
				float:left;
				width:720px;
				min-height:180px;
				text-align:left;
				background-color:#608bc1;
				padding:0px;
				
			}
			
			.btn_c2 p, #home .btn_c2 p, .btn_c1 p, #home .btn_c1 p 
			{
				font-size:24px;
				padding:20px 30px;
			}
			
			.btn_c1
			{
				display:block;
				float:left;
				width:360px;
				min-height:180px;
				background-color:#133e87;
				
			}
			
			.divider
			{
				display:block;
				float:left;
				width:100%;
				height:4px;
				background-color:#f3f3e0;
			}
			
			.content_div
			{
				clear:both;
				display:none;
				float:left;
				width:100%;
				padding:20px 0px 0px 0px;
			}
			
			#gdpr_banner
			{
				position:fixed;
				bottom:0px;
				background-color:rgba(0, 0, 0, 0.8);
				width:100%;
				padding:20px;
				text-align:center;
				
			}

			#gdpr_banner p
			{
				color:#f3f3e0;
				size:14px;
			}

			#gdpr_banner #gdpr_ok
			{
				display: inline-block;
				padding:10px 15px;
				margin:0px 10px;
				background:#009900;
				border:1px solid #FFF;
				color:#f3f3e0;
				size:14px;
				font-family:arial;
			}

			#gdpr_banner #gdpr_ok:hover
			{
				cursor:pointer;
			}

			

				
			


		.dayPicker, .dayPickerEmty, .greyedOut, .booked
		{
			width:50px;
			height:50px;
			text-align:center;
			display: grid;
			float:left;
			align-items: center;
			font-family:Arial;
			font-size:15px;
			padding:2px;
			margin:2px;
			border:1px solid #FFFFFF;
		}

		.topRow
		{
			font-family:Arial;
			font-size:10px;
			font-weight:bold;
			border-bottom:3px solid #000000;
		}

		.header
		{
			text-align: center;
			font-family:Arial;
			font-size:18px;
			padding:10px 0px;
		}

		.greyedOut
		{
			background-color:#e9e9e9;
		}

		.dayPicker, .greyedOut, .booked
		{
			border:1px solid #c1c1c1;
			border-radius:3px;
		}


		.booked
		{
			background-color:#FF4444;
			
		}

		.today
		{
			font-weight: bold;
		}
		
		#calendar_box
		{
			display:block;
			float:left;
			padding:2px;
			margin:4px;
			background:#FFFFFF;
			width:860px;
		}
		
		#first_month, #second_month
		{
			display:block;
			float:left;
			border:1px solid #999999;
			padding:2px;
		}
		
		#prev, #next
		{
			display:block;
			float:left;
			width:100px;
			text-align:center;
			font-family:Arial;
			font-size:14px;
			padding:8px 0px;
			border:1px solid #062538;
			border-radius:5px;
			background:#2dabf9;
			color:#FFFFFF;
			text-shadow:1px 1px #263666;
			text-transform: uppercase;
			font-weight: bold;
		}
		
		#next{
			float:right;
		}

		.break
		{
			clear:both;
		}

		#cal_top_header
		{
			display: block;
    		float: left;
    		clear: both;
    		height: 40px;
    		min-width: 850px;
			text-align:center;
			font-family:Arial;
			font-size:20px;
		}

		#calendar_info_box
		{
			display:none;
			width:100%;
			background:#FFFFFF;
			font-family:Arial;
			font-size:18px;
		}

		#calendar_info_close_btn
		{
			display:block;
			float:right;
		}	

		</style>
	</head>
	<body>
	
	<div id="main">
		<div id="menu_bar">
			<a>LOADING CONTENT</a>
		</div>
		<a href="#login" class="menu_link"><div>Login</div></a>
	
		
		<div class="content_div" id="home">
			<img src="images/logo.png">
			<p>Booking and resavation system</p>
			<div class="divider"></div>
			<div class="btn_c2"><p>
				CREATE A FREE BOOKING SITE FOR YOUR MEETING 
				ROOM, VACATION HOUSE, MUSIC STUDIO, CARS 
				OR EVEN YOUR BOAT.</p> 
			</div>
			<a href="#new_account" class="menu_link">
				<div class="btn_c1">
					<p> Create a free account</p>
				</div>
			</a>
		</div>
		
		<div  class="content_div" id="login">
			<table>
				<tr><td>E-mail: </td><td><input id="login_email"></td></tr>
				<tr><td>password: </td><td><input type="password" id="login_password"></td></tr>
				<tr><td colspan="2"><input class="submit_btn" data-action="login" type="button" value="login"></td></tr>
			</table>
		</div>

		<div  class="content_div" id="loggedin">
			You are logged in!
		</div>
		
		<div  class="content_div" id="new_account">
			<table>
				<tr><td>E-mail: </td><td><input id="account_email"></td></tr>
				<tr><td>password: </td><td><input type="password" id="account_password"></td></tr>
				<tr><td>Username: </td><td><input id="account_username"></td></tr>
				<tr><td colspan="2"><input class="submit_btn" data-action="new_account" type="button" value="Create"></td></tr>
			</table>
		</div>

		<div  class="content_div" id="calendar">
			<div id="calendar_box">
				<div id="calendar_wrapper">
					<div id="cal_top_header">
						<div id="prev">prev</div>
							Calendar
						<div id="next">next</div>
					</div>
					<div id="first_month">
						<div id="first_date" class="header"></div>
						<div class="dayPickerEmty topRow">Mon</div>
						<div class="dayPickerEmty topRow">Tue</div>
						<div class="dayPickerEmty topRow">Wed</div>
						<div class="dayPickerEmty topRow">Thu</div>
						<div class="dayPickerEmty topRow">Fre</div>
						<div class="dayPickerEmty topRow">Sat</div>
						<div class="dayPickerEmty topRow">Sun</div>	
						<div id="first_month_picker"></div>
					</div>
					<div id="second_month">
						<div id="second_date" class="header"></div>
						<div class="dayPickerEmty topRow">Mon</div>
						<div class="dayPickerEmty topRow">Tue</div>
						<div class="dayPickerEmty topRow">Wed</div>
						<div class="dayPickerEmty topRow">Thu</div>
						<div class="dayPickerEmty topRow">Fre</div>
						<div class="dayPickerEmty topRow">Sat</div>
						<div class="dayPickerEmty topRow">Sun</div>
						<div id="second_month_picker"></div>
					</div>
					<div class="break">
						<table>
							<tr><td>Selected start date:</td><td><input id="startDate" value=""></td></tr>
							<tr><td>Selected end date:</td><td><input id="endDate" value=""></td></tr>
						</table>
					</div>
				</div>
				<div id="calendar_info_box">
					<div id="calendar_info_close_btn">x</div>
					<h1>Reserved</h1>
					<table>
						<tr>
							<td>User:</td><td><span id="calendar_info_box_user"></span></td>
						</tr>
						<tr>
							<td>Start:</td><td><span id="calendar_info_box_start"></span></td>
						</tr>
						<tr>
							<td>End:</td><td><span id="calendar_info_box_end"></span></td>
						</tr>
					</table>	
				</div>
			</div>		
		</div>

		<div  class="content_div" id="dashboard">
			
			<div id="new_btn"></div>
			<div id="messages"></div>
			<div id="board_list">Calendars:</div>

			<div id="create_calendar">
				Title<input id="c_title"><br>
				type<select id="c_type">
					<option value="day">day</option>
					<option value="time">time</option>
				</select><br>
				<input class="submit_btn" data-action="new_calendar" type="button" value="Create">
			</div>
		</div>

		<div  class="content_div" id="mail_send">Mail send, check your mail you retard!</div>
		<div  class="content_div" id="error"><div id="error_msg"></div></div>
		<div  class="content_div" id="load">LOADING...</div></div>
		
	</div>
		
	<div id="gdpr_banner">
		<p>bla bla bla. bla bla </p><div id="gdpr_ok">Accept</div>
	</div>
	</body>
</html>